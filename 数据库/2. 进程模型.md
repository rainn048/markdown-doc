# 进程模型

[toc]

## 意义

在设计多用户服务器时，必须要尽早决定并发用户请求的执行以及它们是如何被映射到操作系统的进程和线程的。这个决定将对之后的系统软件架构以及运行效率、稳定性、轻便性产生深远影响。

## 术语定义

* 进程：一个操作系统进程包含了一个正在执行的程序的活动单元以及专属的地址空间，包括进程状态、系统资源句柄和安全性上下文环境。是程序执行的单元，被操作系统内核管理。
* 线程：一个操作系统线程是操作系统程序执行单元，它没有私有的地址空间和上下文。在多线程系统中，每个线程都可以共享地访问所属进程的地址空间。线程的执行是由系统内核来管理的，通常被称为内核线程或者 k-线程。
* 轻量级线程包：是一个应用层次上的结构，它支持单系统进程中的多线程。不同于由操作系统内核调度的线程，轻量级线程由应用级线程调度程序来负责调度。它们之间的区别是， 轻量级线程仅在用户空间内调度而没有内核调度程序的参与。轻量级线程仅运行在一个进程中，从操作系统调度程序的角度来看只有一个线程在运行。轻量级线程相对于系统线程而言，可以更快地切换，因为轻量级线程不必通过系统内核来切换调度。轻量级线程也有它的缺点，任何线程中断操作，比如 I/O 中断，都会打断进程中的其他线程。这使得一个线程中断等待系统资源时，其它线程就不能运行。轻量级线程包通过以下两点来避免该情况的发生：（1）只接受无中断的异步 I/O 操作；（2）不调用可以导致中断的系统操作。总的来说，轻量级线程相对于系统进程和系统线程，提供了一个更困难的编程模型。一些 DBMS 系统实现了它们自己的轻量级线程包，这些是轻量级线程包的特殊实现。当需要区别于其它线程时，我们将这些线程称为 DBMS 线程和简单线程。
* DBMS 工作者：是指 DBMS 中为客户端工作的线程。它与客户端是一一对应的，即一个 DBMS工作者处理来自一个 DBMS 客户端的所有 SQL 请求。

## 单处理机和轻量级线程

DBMS 拥有三个天然的进程模型性质。从最简单到最复杂依次为：

* 每个 DBMS 工作者拥有一个进程；
* 个 DBMS 工作者拥有一个线程；
* 进程池。

尽管该模型被简化了，但是， 今天的商业 DBMS 系统都遵循这三条性质。

### 每个 DBMS 工作者拥有一个进程
