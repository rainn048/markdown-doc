# 指令调度

对程序块或过程中的操作进行排序以有效利用处理器资源的任务称为指令调度。调度器假定其输入代码已经优化过，不需要再次优化，只是把指令组装到可用的处理器周期和功能单元发射槽中，使代码尽可能快速地运行。

指令调度的主导技术是一种贪婪启发式算法，称为调度表。调度表运行在无分支代码上，使用各种优先级排序方案来指引其选择。

怎么评价指令调度的结果？

1. 每秒指令数
2. 完成一项固定任务所需要的时间

指令调度器的3个主要目标:

1. 必须保持输入代码的语义；
2. 应该通过避免拖延或nop指令来最小化执行时间
3. 应该尽可能避免延长值的生命周期，至少不能因此导致额外的寄存器溢出。

指令调度问题定义在基本程序块的依赖关系图上，依赖关系图也称为前驱图。

依赖关系图中延迟最长的路径是关键路径。

## 局部调度表

步骤：

1. 重命名以避免反相关；
2. 建立依赖关系图
3. 为每个操作指定优先级
4. 重复选择一个操作并调度它
